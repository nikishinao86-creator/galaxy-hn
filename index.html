<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hunter Network</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; background: #000; }
    #info {
      position: absolute;
      top: 10px;
      width: 100%;
      color: #fff;
      text-align: center;
      font-family: sans-serif;
      pointer-events: none;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div id="info">üåå –ó–∞–≥—Ä—É–∑–∫–∞ –≥–∞–ª–∞–∫—Ç–∏–∫–∏...</div>
  <script>
    const tg = Telegram.WebApp;
    tg.ready();
    tg.expand();

    const user = tg.initDataUnsafe.user;
    const startParam = tg.initDataUnsafe.start_param; // –Ω–∞–ø—Ä–∏–º–µ—Ä: gal_123456789

    if (startParam) {
      const refId = startParam.split('_')[1];
      console.log("–ü—Ä–∏—à—ë–ª –ø–æ —Å—Å—ã–ª–∫–µ –æ—Ç:", refId);
      // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä: "user.id –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –ø–æ —Å—Å—ã–ª–∫–µ –æ—Ç refId"
    }

    document.getElementById("info").textContent = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.first_name}!`;

    // --- Three.js —Å—Ü–µ–Ω–∞ ---
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setClearColor(0x000011);
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–≤–µ–∑–¥–∞ (—Ç—ã)
    const starGeometry = new THREE.SphereGeometry(1, 32, 32);
    const starMaterial = new THREE.MeshBasicMaterial({ color: 0xffd700, emissive: 0xffa500 });
    const star = new THREE.Mesh(starGeometry, starMaterial);
    scene.add(star);

    // –°–∏–º—É–ª—è—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (–≤ –±—É–¥—É—â–µ–º ‚Äî –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞)
    const referrals = [
      { id: 1, level: 1, color: 0x1e90ff, moons: 2 },   // –ø–ª–∞–Ω–µ—Ç–∞ 1
      { id: 2, level: 1, color: 0x32cd32, moons: 1 },   // –ø–ª–∞–Ω–µ—Ç–∞ 2
      { id: 3, level: 1, color: 0xff6347, moons: 0 }    // –ø–ª–∞–Ω–µ—Ç–∞ 3
    ];

    referrals.forEach((ref, i) => {
      const angle = (i / referrals.length) * Math.PI * 2;
      const radius = 6;
      const planet = new THREE.Mesh(
        new THREE.SphereGeometry(0.6, 32, 32),
        new THREE.MeshBasicMaterial({ color: ref.color })
      );
      planet.position.set(
        Math.cos(angle) * radius,
        0,
        Math.sin(angle) * radius
      );
      scene.add(planet);

      // –õ—É–Ω—ã (—Ä–µ—Ñ–µ—Ä–∞–ª—ã 2-–≥–æ —É—Ä–æ–≤–Ω—è)
      for (let j = 0; j < ref.moons; j++) {
        const moonAngle = j * Math.PI * 2 / ref.moons;
        const moon = new THREE.Mesh(
          new THREE.SphereGeometry(0.25, 16, 16),
          new THREE.MeshBasicMaterial({ color: 0xdddddd })
        );
        moon.position.set(
          planet.position.x + Math.cos(moonAngle) * 1.3,
          0,
          planet.position.z + Math.sin(moonAngle) * 1.3
        );
        scene.add(moon);
      }
    });

    camera.position.z = 15;

    function animate() {
      requestAnimationFrame(animate);
      star.rotation.y += 0.005;
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
